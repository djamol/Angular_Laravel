{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/movie.service\";\nimport * as i2 from \"../../service/category.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction HomeComponent_option_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r2.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(category_r2.name);\n  }\n}\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"fa-star\": a0,\n    \"fa-star-half-o\": a1,\n    \"fa-star-o\": a2\n  };\n};\nfunction HomeComponent_div_11_p_9_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"i\", 27);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const star_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(1, _c0, star_r7 == 99, star_r7 == 0.5, star_r7 == 0));\n  }\n}\nfunction HomeComponent_div_11_p_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵtemplate(4, HomeComponent_div_11_p_9_ng_container_4_Template, 2, 5, \"ng-container\", 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const rating_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", rating_r5.source, \":\", i0.ɵɵpipeBind2(2, 3, rating_r5.value / rating_r5.total * 5, \"1.2-2\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.getStarsArray(rating_r5.value / rating_r5.total * 5));\n  }\n}\nfunction HomeComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelement(1, \"img\", 10);\n    i0.ɵɵelementStart(2, \"div\", 11)(3, \"div\", 12)(4, \"h5\", 13);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h6\", 14);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementStart(8, \"div\", 15);\n    i0.ɵɵtemplate(9, HomeComponent_div_11_p_9_Template, 5, 6, \"p\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"p\", 17);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\", 18)(13, \"span\")(14, \"a\", 19);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_11_Template_a_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const movie_r3 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.addRating(movie_r3.id, 5));\n    });\n    i0.ɵɵtext(15, \"5\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"a\", 20);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_11_Template_a_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const movie_r3 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.addRating(movie_r3.id, 4));\n    });\n    i0.ɵɵtext(17, \"4\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"a\", 21);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_11_Template_a_click_18_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const movie_r3 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.addRating(movie_r3.id, 3));\n    });\n    i0.ɵɵtext(19, \"3\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"a\", 22);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_11_Template_a_click_20_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const movie_r3 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.addRating(movie_r3.id, 2));\n    });\n    i0.ɵɵtext(21, \"2\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"a\", 23);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_11_Template_a_click_22_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const movie_r3 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.addRating(movie_r3.id, 1));\n    });\n    i0.ɵɵtext(23, \"1\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(24, \"button\", 24);\n    i0.ɵɵtext(25, \"View\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const movie_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", movie_r3.poster, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", movie_r3.title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(movie_r3.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", movie_r3.genre, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", movie_r3.ratings);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(movie_r3.released);\n  }\n}\nconst _c1 = function () {\n  return {\n    standalone: true\n  };\n};\nexport class HomeComponent {\n  constructor(movieService, cdr, categoryService) {\n    this.movieService = movieService;\n    this.cdr = cdr;\n    this.categoryService = categoryService;\n    this.movies = [];\n    this.filteredMovies = [];\n    this.categories = [];\n    this.searchKey = '';\n    this.category_id = '0';\n    this.login_b = true;\n    this.unFilteredMovies = false;\n  }\n  ngOnInit() {\n    //this.login();\n    this.getMovies();\n    this.getCategories();\n  }\n  /*\n      login() {\n        this.AuthService.login({\n          \"name\":\"amol\",\n          \"email\":\"amol@asf.in\",\n          \"password\":\"password\"\n      }).subscribe((data: any) => {\n          this.AuthService.cookie.storeCookie('token',data.token);\n          console.log(\"login\",data.token);\n      });\n      } */\n  buttonToogle() {\n    this.login_b = !this.login_b;\n  }\n  getMovies() {\n    this.movieService.getDashboard().subscribe(movies => {\n      this.movies = movies;\n      this.filteredMovies = this.movies;\n      this.page_data = movies;\n      this.unFilteredMovies = true;\n    });\n  }\n  filterMovies() {\n    console.log('cat', this.category_id);\n    console.log('cat', this.searchKey);\n    if (this.category_id == 'All' || this.category_id == 0) {\n      this.filteredMovies = this.movies.filter(movie => movie.title.toLowerCase().includes(this.searchKey.toLowerCase()));\n      this.unFilteredMovies = true;\n      return;\n    }\n    this.unFilteredMovies = false;\n    this.filteredMovies = this.movies.filter(movie => movie.title.toLowerCase().includes(this.searchKey.toLowerCase()) && movie.category_id == this.category_id);\n    this.cdr.detectChanges();\n  }\n  getCategories() {\n    this.categoryService.getCategories().subscribe(categories => {\n      this.categories = categories;\n    });\n  }\n  addRating(id, rating) {\n    console.log(\"id\", id);\n    console.log(\"rating\", rating);\n    const observer = {\n      next: response => {\n        console.log(\"response\", response);\n      },\n      error: error => {\n        console.log('Error:', error.error);\n        this.main.showMessage('Error :' + error.status, error.error.error, '', 1);\n      },\n      complete: () => {\n        console.log('Complete');\n      }\n    };\n    this.movieService.addRating({\n      id: id,\n      rating: rating\n    }).subscribe(obs);\n  }\n  getStarsArray(rating) {\n    const fullStars = Math.floor(rating);\n    const hasHalfStar = rating % 1 !== 0;\n    const emptyStars = 5 - Math.ceil(rating);\n    const starsArray = [];\n    for (let i = 0; i < fullStars; i++) {\n      starsArray.push(99);\n    }\n    if (hasHalfStar) {\n      starsArray.push(0.5);\n    }\n    for (let i = 0; i < emptyStars; i++) {\n      starsArray.push(0);\n    }\n    return starsArray;\n  }\n}\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.MovieService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.CategoryService));\n};\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 12,\n  vars: 8,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"form-group\"], [\"type\", \"text\", \"value\", \"\", \"placeholder\", \"Search by Title\", 1, \"form-control\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\", \"input\"], [1, \"form-control\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\", \"change\"], [\"value\", \"All\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"col-md-4\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"col-md-4\"], [1, \"card-img-top\", 3, \"src\", \"alt\"], [1, \"card\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-subtitle\", \"mb-2\", \"text-muted\"], [1, \"d-flex\"], [\"class\", \"d-inline-block\", \"style\", \"font-size: 10px;\", 4, \"ngFor\", \"ngForOf\"], [1, \"card-text\"], [1, \"stars\"], [1, \"star-1\", 3, \"click\"], [1, \"star-2\", 3, \"click\"], [1, \"star-3\", 3, \"click\"], [1, \"star-4\", 3, \"click\"], [1, \"star-5\", 3, \"click\"], [1, \"btn\", \"btn-primary\"], [1, \"d-inline-block\", 2, \"font-size\", \"10px\"], [4, \"ngFor\", \"ngForOf\"], [1, \"fa\", 3, \"ngClass\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\")(3, \"div\", 2)(4, \"input\", 3);\n      i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_4_listener($event) {\n        return ctx.searchKey = $event;\n      })(\"input\", function HomeComponent_Template_input_input_4_listener() {\n        return ctx.filterMovies();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 2)(6, \"select\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_select_ngModelChange_6_listener($event) {\n        return ctx.category_id = $event;\n      })(\"change\", function HomeComponent_Template_select_change_6_listener() {\n        return ctx.filterMovies();\n      });\n      i0.ɵɵelementStart(7, \"option\", 5);\n      i0.ɵɵtext(8, \"All Categories\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, HomeComponent_option_9_Template, 2, 2, \"option\", 6);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(10, \"div\", 1);\n      i0.ɵɵtemplate(11, HomeComponent_div_11_Template, 26, 6, \"div\", 7);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.searchKey)(\"ngModelOptions\", i0.ɵɵpureFunction0(6, _c1));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.category_id)(\"ngModelOptions\", i0.ɵɵpureFunction0(7, _c1));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.filteredMovies);\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgForOf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm, i3.DecimalPipe],\n  styles: [\".stars[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n    position: absolute;\\n    left: -999999px;\\n}\\n\\n.stars[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n    display: inline-block;\\n    font-size: 0;\\n    text-decoration: none;\\n}\\n\\n.stars[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before {\\n    position: relative;\\n    font-size: 18px;\\n    font-family: 'FontAwesome', serif;\\n    display: block;\\n    content: \\\"\\\\f005\\\";\\n    color: #9e9e9e;\\n}\\n\\n.stars[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before, .stars[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover    ~ a[_ngcontent-%COMP%]:before, .stars[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:before, .stars[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]    ~ a[_ngcontent-%COMP%]:before {\\n    color: blue;\\n}\\n.fa-star.yellow[_ngcontent-%COMP%] {\\n    color: yellow;\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3Jlc291cmNlcy9hbmd1bGFyL3NyYy9hcHAvY29tcG9uZW50L2hvbWUvaG9tZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksa0JBQWtCO0lBQ2xCLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxxQkFBcUI7SUFDckIsWUFBWTtJQUNaLHFCQUFxQjtBQUN6Qjs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixlQUFlO0lBQ2YsaUNBQWlDO0lBQ2pDLGNBQWM7SUFDZCxnQkFBZ0I7SUFDaEIsY0FBYztBQUNsQjs7QUFFQTs7OztJQUlJLFdBQVc7QUFDZjtBQUNBO0lBQ0ksYUFBYTtFQUNmIiwic291cmNlc0NvbnRlbnQiOlsiLnN0YXJzIGlucHV0IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogLTk5OTk5OXB4O1xufVxuXG4uc3RhcnMgYSB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIGZvbnQtc2l6ZTogMDtcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG59XG5cbi5zdGFycyBhOmJlZm9yZSB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICBmb250LWZhbWlseTogJ0ZvbnRBd2Vzb21lJywgc2VyaWY7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgY29udGVudDogXCJcXGYwMDVcIjtcbiAgICBjb2xvcjogIzllOWU5ZTtcbn1cblxuLnN0YXJzIGE6aG92ZXI6YmVmb3JlLFxuLnN0YXJzIGE6aG92ZXIgfiBhOmJlZm9yZSxcbi5zdGFycyBhLmFjdGl2ZTpiZWZvcmUsXG4uc3RhcnMgYS5hY3RpdmUgfiBhOmJlZm9yZSB7XG4gICAgY29sb3I6IGJsdWU7XG59XG4uZmEtc3Rhci55ZWxsb3cge1xuICAgIGNvbG9yOiB5ZWxsb3c7XG4gIH1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","HomeComponent","constructor","movieService","cdr","categoryService","ngOnInit","getMovies","getCategories","buttonToogle","login_b","getDashboard","subscribe","movies","filteredMovies","page_data","unFilteredMovies","filterMovies","console","log","category_id","searchKey","filter","movie","title","toLowerCase","includes","detectChanges","categories","addRating","id","rating","observer","next","response","error","main","showMessage","status","complete","obs","getStarsArray","fullStars","Math","floor","hasHalfStar","emptyStars","ceil","starsArray","i","push","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/var/www/html/openpbx/resources/angular/src/app/component/home/home.component.html","/var/www/html/openpbx/resources/angular/src/app/component/home/home.component.ts"],"sourcesContent":["<div class=\"container\">\n    <div  class=\"row\">\n        <form>\n            <div class=\"form-group\">\n              <input type=\"text\" class=\"form-control\" value=\"\" placeholder=\"Search by Title\" [(ngModel)]=\"searchKey\" (input)=\"filterMovies()\" [ngModelOptions]=\"{standalone: true}\">\n            </div>\n            <div class=\"form-group\">\n              <select class=\"form-control\" [(ngModel)]=\"category_id\" (change)=\"filterMovies()\" [ngModelOptions]=\"{standalone: true}\">\n                <option value=\"All\">All Categories</option>\n                <option *ngFor=\"let category of categories\" [value]=\"category.id\">{{ category.name }}</option>\n              </select>\n            </div>\n          </form>\n    </div>\n\n\n\n\n    <div class=\"row\" >\n        <div class=\"col-md-4\" *ngFor=\"let movie of filteredMovies\">\n            <img src=\"{{movie.poster}}\" class=\"card-img-top\" alt=\"{{ movie.title }}\">\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">{{movie.title}}</h5>\n              <h6 class=\"card-subtitle mb-2 text-muted\">{{movie.genre}}\n                <div class=\"d-flex\">\n                <p class=\"d-inline-block\" style=\"font-size: 10px;\" *ngFor=\"let rating of movie.ratings\">\n                    {{rating.source}}:{{rating.value/rating.total*5| number:'1.2-2'}}<br/>\n                    <ng-container *ngFor=\"let star of getStarsArray(rating.value/rating.total*5)\">\n                        <i [ngClass]=\"{'fa-star': star == 99, 'fa-star-half-o': star == 0.5, 'fa-star-o': star == 0 }\" class=\"fa\"></i>\n\n                    </ng-container>\n                </p>\n            </div>\n        </h6>\n              <p class=\"card-text\">{{movie.released}}</p>\n                  <p class=\"stars\">\n                <span>\n                  <a class=\"star-1\" (click)=\"addRating(movie.id,5)\">5</a>\n                  <a class=\"star-2\" (click)=\"addRating(movie.id,4)\">4</a>\n                  <a class=\"star-3\" (click)=\"addRating(movie.id,3)\">3</a>\n                  <a class=\"star-4\" (click)=\"addRating(movie.id,2)\">2</a>\n                  <a class=\"star-5\" (click)=\"addRating(movie.id,1)\">1</a>\n                </span>\n              </p>\n              <button class=\"btn btn-primary\">View</button>\n            </div>\n          </div>\n        </div>\n\n\n</div>\n","import {  Component, OnChanges, SimpleChanges,ChangeDetectorRef   } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Movie } from '../../model/movie.model';\nimport { Category } from '../../model/category.model';\nimport { MovieService } from '../../service/movie.service';\nimport { CategoryService } from '../../service/category.service';\nimport { Observer } from 'rxjs';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\nexport class HomeComponent {\n    movies: Movie[] = [];\n    filteredMovies: any[] = [];\n    categories: Category[]=[];\n    searchKey: string = '';\n    page_data:any;\n    category_id:any='0';\n    login_b:boolean=true;\n    unFilteredMovies:boolean=false;\n    constructor(private movieService: MovieService,private cdr: ChangeDetectorRef, private categoryService: CategoryService) {}\n    ngOnInit(): void {\n    //this.login();\n    this.getMovies();\n    this.getCategories();\n    }\n/*\n    login() {\n      this.AuthService.login({\n        \"name\":\"amol\",\n        \"email\":\"amol@asf.in\",\n        \"password\":\"password\"\n    }).subscribe((data: any) => {\n        this.AuthService.cookie.storeCookie('token',data.token);\n        console.log(\"login\",data.token);\n    });\n    } */\n    buttonToogle(){\n        this.login_b=!this.login_b;\n    }\n    getMovies() {\n        this.movieService.getDashboard().subscribe(movies => {\n            this.movies = movies;\n            this.filteredMovies=this.movies;\n            this.page_data =movies;\n            this.unFilteredMovies=true;\n        });\n      }\n\n      filterMovies() {\n        console.log('cat',this.category_id);\n        console.log('cat',this.searchKey);\n\n        if(this.category_id=='All' ||this.category_id==0){\n        this.filteredMovies = this.movies.filter(movie =>\n                movie.title.toLowerCase().includes(this.searchKey.toLowerCase()));\n        this.unFilteredMovies=true;\n        return;\n        }\n        this.unFilteredMovies=false;\n        this.filteredMovies = this.movies.filter(movie =>\n          movie.title.toLowerCase().includes(this.searchKey.toLowerCase()) && movie.category_id == this.category_id)\n        ;\n        this.cdr.detectChanges();\n\n       }\n\n  getCategories() {\n    this.categoryService.getCategories().subscribe(categories => {\n      this.categories = categories;\n    });\n  }\n\n  addRating(id:number,rating:number){\n    console.log(\"id\",id);\n    console.log(\"rating\",rating);\n    const observer: Observer<any> = {\n        next: response => {\n          console.log(\"response\",response);\n        },\n        error: error => {\n          console.log('Error:', error.error);\n          this.main.showMessage('Error :'+error.status,error.error.error,'',1);\n        },\n        complete: () => {\n          console.log('Complete');\n        }\n      };\n    this.movieService.addRating({id:id,rating:rating}).subscribe(obs);\n  }\n  getStarsArray(rating: number): number[] {\n    const fullStars = Math.floor(rating);\n    const hasHalfStar = rating % 1 !== 0;\n    const emptyStars = 5 - Math.ceil(rating);\n\n    const starsArray: number[] = [];\n\n    for (let i = 0; i < fullStars; i++) {\n      starsArray.push(99);\n    }\n\n    if (hasHalfStar) {\n      starsArray.push(0.5);\n    }\n\n    for (let i = 0; i < emptyStars; i++) {\n      starsArray.push(0);\n    }\n\n    return starsArray;\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}